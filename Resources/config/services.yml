services:
    yaml_parser:
        class: Symfony\Component\Yaml\Parser
        public: false

    yaml_dumper:
        class: Symfony\Component\Yaml\Dumper

    faker:
        class: Faker\Factory
        public: false

    fludio_factory.factory:
        class: Fludio\DoctrineEntityFactoryBundle\Factory\Factory
        arguments:
            - @doctrine.orm.entity_manager
            - @fludio_factory.entity_builder

    fludio_factory.entity_builder:
        class: Fludio\DoctrineEntityFactoryBundle\Factory\Util\EntityBuilder
        public: false
        arguments:
            - @doctrine.orm.entity_manager
            - @faker
            - @fludio_doctrine_entity_factory.metadata.yaml_config_provider

    fludio_factory.schema_reader:
        class: Fludio\DoctrineEntityFactoryBundle\Factory\Util\SchemaReader
        arguments:
            - @doctrine.orm.entity_manager

    fludio_doctrine_entity_factory.metadata.config_loader:
        class: Fludio\DoctrineEntityFactoryBundle\Factory\Metadata\ConfigLoader
        public: false
        arguments: [{}]

    fludio_doctrine_entity_factory.metadata.yaml_config_provider:
        class: Fludio\DoctrineEntityFactoryBundle\Factory\Metadata\YamlConfigProvider
        arguments: [ @yaml_parser, @fludio_doctrine_entity_factory.metadata.config_loader ]